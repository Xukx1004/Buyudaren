require=function t(e,n,i){function o(c,a){if(!n[c]){if(!e[c]){var r="function"==typeof require&&require;if(!a&&r)return r(c,!0);if(s)return s(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=n[c]={exports:{}};e[c][0].call(d.exports,function(t){var n=e[c][1][t];return o(n||t)},d,d.exports,t,e,n,i)}return n[c].exports}for(var s="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({BackGround:[function(t,e,n){"use strict";cc._RF.push(e,"0fe31tYlUFAw4661UTMlfue","BackGround"),cc.Class({extends:cc.Component,properties:{leftBtn:cc.Node,rightBtn:cc.Node,bg:cc.Node,batteryList:[cc.Node],bulletList:[cc.Prefab],flueList:[cc.Prefab],coinText:cc.Label,maxDegree:70,minDegree:-70},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.currentBatteryRotation=0,this.currentBattery=this.batteryList[0],this.totalBattery=this.batteryList.length,this.totalCoin=1e4,this.addCoin(0),this.currentBatteryIndex=0,this.addBatteryEvent(),this.addFireEvent()},addFireEvent:function(){this.addNodeTouchEvent(this.bg,function(t){this.totalCoin-this.currentBatteryIndex-1<0||(this.changeBattery(t),this.makeBullet(),this.addCoin(-(this.currentBatteryIndex+1)))},this)},makeBullet:function(){var t=this.currentBattery.rotation,e=cc.degreesToRadians(t),n=cc.pForAngle(e),i=this.currentBattery.x+50*n.y,o=this.currentBattery.y+50*n.x;Global.getClassAndAdd(this.bulletList[this.currentBatteryIndex],"Bullet",this.node,i,o).tClass.init(this.currentBatteryIndex,6*n.y,6*n.x,t)},addBatteryEvent:function(){this.addNodeTouchEvent(this.leftBtn,function(){this.onBattery(!1)},this),this.addNodeTouchEvent(this.rightBtn,function(){this.onBattery(!0)},this)},addNodeTouchEvent:function(t,e,n){t.on(cc.Node.EventType.TOUCH_END,e,n)},changeBattery:function(t){var e=this.currentBattery.parent.convertToWorldSpaceAR(this.currentBattery.position);this.currentBatteryRotation=Global.getDegree(e,t.touch._point),this.currentBatteryRotation>this.maxDegree?this.currentBatteryRotation=this.maxDegree:this.currentBatteryRotation<this.minDegree&&(this.currentBatteryRotation=this.minDegree),this.currentBattery.rotation=this.currentBatteryRotation},onBattery:function(t){t?this.currentBatteryIndex++:this.currentBatteryIndex--,this.currentBatteryIndex>this.batteryList.length-1?this.currentBatteryIndex=0:this.currentBatteryIndex<0&&(this.currentBatteryIndex=this.batteryList.length-1),this.currentBattery=this.batteryList[this.currentBatteryIndex];for(var e=0;e<this.batteryList.length;e++)this.batteryList[e].active=!1;this.currentBattery.active=!0,this.currentBattery.rotation=this.currentBatteryRotation},addCoin:function(t){cc.log(t),this.totalCoin+=t,this.coinText.string=this.totalCoin}}),cc._RF.pop()},{}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"55ec1J8JcFEvY6ZIXMCdqm4","Bullet"),cc.Class({extends:cc.Component,properties:{},init:function(t,e,n,i){this.bulletType=t,this.node.rotation=i,this.speedX=e,this.speedY=n},onCollisionEnter:function(t,e){this.makeFlue(),Global.destroyNode(this.node)},makeFlue:function(){if(this.node&&this.node.parent){var t=this.node.parent.getComponent("BackGround").flueList[this.bulletType],e=Global.getClassAndAdd(t,"Flue",this.node.parent,this.node.x,this.node.y);e.tNode.scale=0,e.tNode.getComponent(cc.Animation).play()}},update:function(){Global.isOutOfScreen(this.node)?(this.isRemove=!0,Global.destroyNode(this.node)):(this.node.x+=this.speedX,this.node.y+=this.speedY)}}),cc._RF.pop()},{}],Coin:[function(t,e,n){"use strict";cc._RF.push(e,"041barsoyRImrMiqV+Nu8/v","Coin"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},move:function(){var t=this.node.parent.parent.parent.getComponent("BackGround").coinText;this.node.getComponent(cc.Animation).play();var e=cc.moveTo(1,cc.p(t.node.x,t.node.y));this.node.runAction(cc.sequence(e,cc.callFunc(this.destroyCoin.bind(this))))},destroyCoin:function(){Global.destroyNode(this.node)}}),cc._RF.pop()},{}],FishManager:[function(t,e,n){"use strict";cc._RF.push(e,"058cb/RGthDuasJAhnk2mWk","FishManager"),cc.Class({extends:cc.Component,properties:{fishList:[cc.Prefab],bg:cc.Node,coinAnim:cc.Prefab,scoreValueTxt:cc.Prefab},onLoad:function(){this.makeCounter=this.makeTime()},update:function(){--this.makeCounter<=0&&(this.makeCounter=this.makeTime(),this.makeFish())},makeTime:function(){return 60+60*Math.random()},makeFish:function(){var t=Math.random()*this.fishList.length>>0,e=Global.fishData[t],n=Math.random()*(e.maxSpeed-e.minSpeed)+e.minSpeed,i=Global.getClassAndAdd(this.fishList[t],"Fish",this.bg,0,0),o=cc.winSize.width>>1,s=Math.random()>.5?-o-i.tNode.width:o+i.tNode.width,c=Math.random()*(cc.winSize.height>>1)-100;i.tClass.init(t,n,s,c)}}),cc._RF.pop()},{}],Fish:[function(t,e,n){"use strict";cc._RF.push(e,"8612anhdBFDpIXLWZxcPmHt","Fish"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.moving=!0,this.moveX=0,this.isDie=!1},init:function(t,e,n,i){var o=50*Math.random()-25>>0;n>0&&(o+=180);var s=cc.degreesToRadians(o),c=cc.pForAngle(s);this.speedX=e*c.x,this.speedY=e*c.y,this.fishType=t,this.node.rotation=-o,this.node.x=n,this.node.y=i,this.captureRate=Global.fishData[this.fishType].captureRate,this.node.getComponent(cc.Animation).play()},canBeCaptured:function(){return this.captureRate*(1+.05*this.getClassName("BackGround").currentBatteryIndex)>Math.random()},getClassName:function(t){return this.node.parent.parent.parent.getComponent(t)},onCollisionEnter:function(t,e){!1!==this.canBeCaptured()&&(e.enabled=!1,this.node.getComponent(cc.Animation).play("fish"+(this.fishType+1)+"2"),this.moving=!1,this.otherX=t.node.x,this.otherY=t.node.y)},die:function(){this.isDie=!0},showValue:function(){var t=Global.getClassAndAdd(this.getClassName("FishManager").scoreValueTxt,"Score",this.node.parent,this.otherX,this.otherY+30),e=Global.fishData[this.fishType].coin;t.tClass.setValue(e),this.getClassName("BackGround").addCoin(e)},showCoin:function(){Global.getClassAndAdd(this.getClassName("FishManager").coinAnim,"Coin",this.node.parent,this.otherX,this.otherY).tClass.move()},update:function(){this.moving&&(this.node.x+=this.speedX,this.node.y+=this.speedY,this.moveX+=this.speedX),(Math.abs(this.moveX)>cc.winSize.width>>1&&Global.isOutOfScreen(this.node)||this.isDie)&&Global.destroyNode(this.node)}}),cc._RF.pop()},{}],Flue:[function(t,e,n){"use strict";cc._RF.push(e,"8263cKm5PpCPbiuMVVgLooH","Flue"),cc.Class({extends:cc.Component,properties:{},die:function(){Global.destroyNode(this.node)}}),cc._RF.pop()},{}],GlobalFun:[function(t,e,n){"use strict";cc._RF.push(e,"2b6c1RtvShBmK92hX2x85Gu","GlobalFun"),window.Global={fishData:[{coin:1,captureRate:.25,minSpeed:.5,maxSpeed:1.2},{coin:5,captureRate:.15,minSpeed:.5,maxSpeed:1.2},{coin:10,captureRate:.12,minSpeed:.5,maxSpeed:1.2},{coin:20,captureRate:.1,minSpeed:.5,maxSpeed:1.2},{coin:30,captureRate:.09,minSpeed:.5,maxSpeed:.8},{coin:50,captureRate:.08,minSpeed:.5,maxSpeed:.8},{coin:70,captureRate:.07,minSpeed:.5,maxSpeed:.8},{coin:100,captureRate:.03,minSpeed:.5,maxSpeed:.6},{coin:200,captureRate:.01,minSpeed:.5,maxSpeed:.6}],getClassAndAdd:function(t,e,n,i,o){var s=cc.instantiate(t),c=s.getComponent(e);return n.addChild(s),s.x=i,s.y=o,{tNode:s,tClass:c}},isOutOfScreen:function(t){var e=cc.winSize.width>>1,n=cc.winSize.height>>1,i=t.width>>1,o=t.height>>1;return t.x<-e-i||t.x>e+i||t.y<-n-o||t.y>n+o},destroyNode:function(t){t&&t.parent&&(t.destroy(),t.parent.removeChild(t))},getDegree:function(t,e){var n=e.x-t.x,i=e.y-t.y,o=180*Math.atan(n/i)/Math.PI;return i<0&&(o=n<0?180+Math.abs(o):180-Math.abs(o)),o}},cc._RF.pop()},{}],Score:[function(t,e,n){"use strict";cc._RF.push(e,"dac628SyW1L/ZNsEfgNZLnu","Score"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.vx=this.node.x,this.vy=this.node.y},setValue:function(t){this.node.getComponent("cc.Label").string="+"+t;var e=cc.moveBy(1,cc.p(this.vx,this.vy+60));this.node.runAction(cc.sequence(e,cc.callFunc(this.destroySocre.bind(this))))},destroySocre:function(){Global.destroyNode(this.node)}}),cc._RF.pop()},{}],Welcome:[function(t,e,n){"use strict";cc._RF.push(e,"c8493F0W8NI9L8yHj01iIBK","Welcome"),cc.Class({extends:cc.Component,properties:{btnPlay:cc.Button,logo:cc.Node},onLoad:function(){cc.director.preloadScene("game");var t=cc.rotateTo(2,10),e=cc.rotateTo(4,-10),n=cc.rotateTo(2,0),i=cc.sequence(t,e,n);this.logo.runAction(cc.repeatForever(i)),this.btnPlay.node.on(cc.Node.EventType.TOUCH_END,this.onStart.bind(this))},onStart:function(){this.node.stopAllActions(),cc.director.loadScene("game")}}),cc._RF.pop()},{}]},{},["BackGround","Bullet","Coin","Fish","FishManager","Flue","GlobalFun","Score","Welcome"]);